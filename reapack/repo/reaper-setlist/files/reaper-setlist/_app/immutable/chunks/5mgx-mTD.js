var G=Object.defineProperty;var L=s=>{throw TypeError(s)};var H=(s,e,t)=>e in s?G(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var M=(s,e,t)=>H(s,typeof e!="symbol"?e+"":e,t),k=(s,e,t)=>e.has(s)||L("Cannot "+t);var r=(s,e,t)=>(k(s,e,"read from private field"),t?t.call(s):e.get(s)),v=(s,e,t)=>e.has(s)?L("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),B=(s,e,t,a)=>(k(s,e,"write to private field"),a?a.call(s,t):e.set(s,t),t);import{g as N,J,K as y,L as Q,M as Y,N as C,h as w,O as V,P as W,Q as X,d as j,b as ee,E as se,R as te,S as re,U as ae,V as ie,W as F,C as ne,e as fe,u as U,I as ce,X as $,Y as ue,Z as de,_ as he,m as I,$ as le,a0 as oe,k as _e,v as ve,a1 as pe,z as be,a2 as ge,a3 as Se,a4 as Pe,a5 as Ae,a6 as Ee}from"./Dv93RvCJ.js";var o,_,d,p,P,A,T;class Re{constructor(e,t=!0){M(this,"anchor");v(this,o,new Map);v(this,_,new Map);v(this,d,new Map);v(this,p,new Set);v(this,P,!0);v(this,A,()=>{var e=N;if(r(this,o).has(e)){var t=r(this,o).get(e),a=r(this,_).get(t);if(a)J(a),r(this,p).delete(t);else{var n=r(this,d).get(t);n&&(r(this,_).set(t,n.effect),r(this,d).delete(t),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),a=n.effect)}for(const[i,f]of r(this,o)){if(r(this,o).delete(i),i===e)break;const c=r(this,d).get(f);c&&(y(c.effect),r(this,d).delete(f))}for(const[i,f]of r(this,_)){if(i===t||r(this,p).has(i))continue;const c=()=>{if(Array.from(r(this,o).values()).includes(i)){var h=document.createDocumentFragment();W(f,h),h.append(Y()),r(this,d).set(i,{effect:f,fragment:h})}else y(f);r(this,p).delete(i),r(this,_).delete(i)};r(this,P)||!a?(r(this,p).add(i),Q(f,c,!1)):c()}}});v(this,T,e=>{r(this,o).delete(e);const t=Array.from(r(this,o).values());for(const[a,n]of r(this,d))t.includes(a)||(y(n.effect),r(this,d).delete(a))});this.anchor=e,B(this,P,t)}ensure(e,t){var a=N,n=X();if(t&&!r(this,_).has(e)&&!r(this,d).has(e))if(n){var i=document.createDocumentFragment(),f=Y();i.append(f),r(this,d).set(e,{effect:C(()=>t(f)),fragment:i})}else r(this,_).set(e,C(()=>t(this.anchor)));if(r(this,o).set(a,e),n){for(const[c,u]of r(this,_))c===e?a.skipped_effects.delete(u):a.skipped_effects.add(u);for(const[c,u]of r(this,d))c===e?a.skipped_effects.delete(u.effect):a.skipped_effects.add(u.effect);a.oncommit(r(this,A)),a.ondiscard(r(this,T))}else w&&(this.anchor=V),r(this,A).call(this)}}o=new WeakMap,_=new WeakMap,d=new WeakMap,p=new WeakMap,P=new WeakMap,A=new WeakMap,T=new WeakMap;function we(s,e,t=!1){w&&ee();var a=new Re(s),n=t?se:0;function i(f,c){if(w){const h=te(s)===re;if(f===h){var u=ae();ie(u),a.anchor=u,F(!1),a.ensure(f,c),F(!0);return}}a.ensure(f,c)}j(()=>{var f=!1;e((c,u=!0)=>{f=!0,i(u,c)}),f||i(!1,null)},n)}function K(s,e){return s===e||(s==null?void 0:s[$])===e}function Oe(s={},e,t,a){return ne(()=>{var n,i;return fe(()=>{n=i,i=[],U(()=>{s!==t(...i)&&(e(s,...i),n&&K(t(...n),s)&&e(null,...n))})}),()=>{ce(()=>{i&&K(t(...i),s)&&e(null,...i)})}}),s}let R=!1;function Te(s){var e=R;try{return R=!1,[s(),R]}finally{R=e}}const me={get(s,e){if(!s.exclude.includes(e))return s.props[e]},set(s,e){return!1},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function xe(s,e,t){return new Proxy({props:s,exclude:e},me)}function De(s,e,t,a){var x;var n=(t&Pe)!==0,i=(t&Se)!==0,f=a,c=!0,u=()=>(c&&(c=!1,f=i?U(a):a),f),h;if(n){var q=$ in s||Ee in s;h=((x=ue(s,e))==null?void 0:x.set)??(q&&e in s?l=>s[e]=l:void 0)}var b,O=!1;n?[b,O]=Te(()=>s[e]):b=s[e],b===void 0&&a!==void 0&&(b=u(),h&&(de(),h(b)));var g;if(g=()=>{var l=s[e];return l===void 0?u():(c=!0,l)},(t&he)===0)return g;if(h){var z=s.$$legacy;return(function(l,E){return arguments.length>0?((!E||z||O)&&h(E?g():l),l):g()})}var m=!1,S=((t&Ae)!==0?le:oe)(()=>(m=!1,g()));n&&I(S);var Z=be;return(function(l,E){if(arguments.length>0){const D=E?I(S):n?_e(l):l;return ve(S,D),m=!0,f!==void 0&&(f=D),l}return pe&&m||(Z.f&ge)!==0?S.v:I(S)})}export{Re as B,Oe as b,we as i,De as p,xe as r};
