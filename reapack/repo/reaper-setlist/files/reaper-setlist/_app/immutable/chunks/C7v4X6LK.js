import{d as Y,f as R,t as B,a as f,s as G}from"./BzJ4SX3Z.js";import{p as Z,k as ee,a as te,f as ae,s,c as n,l as d,t as M,r,m as h,n as P,o as se,q as ne}from"./CK57Ve49.js";import{g as re,e as oe,B as N,b as ie,n as le,r as T}from"./DHXfWtOE.js";import{b as ce,a as O}from"./DgwUmPXI.js";import{F as de}from"./4n-jHPVf.js";var ue=(b,i)=>i(b.currentTarget.value),pe=R("<option> </option>"),ve=R('<div class="form-group"><label for="relative-path">Project File:</label> <select id="relative-path" required><option>Select project...</option><!></select> <div class="checkbox-container svelte-mj9djs"><label class="checkbox-label svelte-mj9djs"><input type="checkbox" class="svelte-mj9djs"/> Hide projects already used by other songs</label></div></div> <div class="form-group"><label for="song-name">Song Name:</label> <input type="text" id="song-name" placeholder="Enter song name" required/></div> <div class="form-group"><label for="duration">Duration (seconds):</label> <div class="input-with-button"><input type="number" id="duration" placeholder="Duration in seconds" min="0" required/> <!></div> <span class="duration-display svelte-mj9djs"> </span></div> <div class="submit-section"><!></div>',1);function ge(b,i){Z(i,!0);const u=re(),e=ee({...i.song}),W=h(()=>H(e.length));let _=ne(!0);const A=h(()=>Object.values(i.songs).filter(t=>t.id!==e.id).map(t=>t.path)),C=h(()=>d(_)?i.projects.filter(t=>!d(A).includes(t)):i.projects);function H(t){const l=Math.floor(t/60),c=t%60;return`${l}:${c.toString().padStart(2,"0")}`}function I(t){e.path=t;const l=t.split(/[/\\]/),p=l[l.length-1].replace(/\.[^/.]+$/,"");e.name=p}async function L(){const t=await u.script.getOpenTabs(),l=t.tabs[t.activeIndex];let c=!1;(!l||!e.path.endsWith(l.name))&&(await u.reaper.newTab(),await u.script.openProject(e.path),c=!0),e.length=Math.ceil(await u.script.getProjectLength()),c&&await u.reaper.closeTab(),le.success("Duration retrieved from Reaper!")}de(b,{onsubmit:()=>i.onSubmit(e),children:(t,l)=>{var c=ve(),p=ae(c),v=s(n(p),2);v.__change=[ue,I];var g=n(v);g.value=g.__value="";var U=s(g);oe(U,16,()=>d(C),a=>a,(a,m)=>{var o=pe(),F={},X=n(o,!0);r(o),M(()=>{F!==(F=m)&&(o.value=(o.__value=m)??""),G(X,m)}),f(a,o)}),r(v);var w=s(v,2),k=n(w),D=n(k);T(D),P(),r(k),r(w),r(p);var j=s(p,2),$=s(n(j),2);T($),r(j);var x=s(j,2),y=s(n(x),2),S=n(y);T(S);var z=s(S,2);const J=h(()=>e.path==="");N(z,{elementType:"button",onclick:L,get disabled(){return d(J)},children:(a,m)=>{P();var o=B("Get from Reaper");f(a,o)},$$slots:{default:!0}}),r(y);var q=s(y,2),K=n(q,!0);r(q),r(x);var E=s(x,2),Q=n(E);const V=h(()=>e.name===""||e.path==="");N(Q,{elementType:"submit",get disabled(){return d(V)},children:(a,m)=>{P();var o=B("Save");f(a,o)},$$slots:{default:!0}}),r(E),M(()=>G(K,d(W))),ie(v,()=>e.path,a=>e.path=a),ce(D,()=>d(_),a=>se(_,a)),O($,()=>e.name,a=>e.name=a),O(S,()=>e.length,a=>e.length=a),f(t,c)},$$slots:{default:!0}}),te()}Y(["change"]);export{ge as S};
