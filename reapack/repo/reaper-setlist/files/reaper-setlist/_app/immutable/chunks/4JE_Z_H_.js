import{b as Se,a as b,d as de,f as q,e as we,s as U,t as ne}from"./B_oGNvez.js";import{p as ue,m as a,o as L,v as h,c as u,r as v,a as ce,k as se,f as De,s as d,t as K,n as Q,q as re}from"./BWSO7Bi6.js";import{r as ye,i as X,b as ze}from"./DnK7exoB.js";import{a as Me,r as oe,e as ie,B as $,f as le,c as Te,i as Ee,h as Oe,b as Ce}from"./DEfdFb_i.js";import{a as Ie,t as ve,f as Ve,b as qe}from"./DemV4TKw.js";import{a as Pe}from"./pJQC24l2.js";import{F as ke}from"./BMeno8qO.js";import{D as Ae}from"./ZPwupsfc.js";import{o as Be,a as Le}from"./D9zGA_ww.js";function je(i){const e=i-1;return e*e*e+1}function Fe(i,{from:e,to:t},m={}){var{delay:_=0,duration:P=I=>Math.sqrt(I)*120,easing:x=je}=m,l=getComputedStyle(i),O=l.transform==="none"?"":l.transform,[C,D]=l.transformOrigin.split(" ").map(parseFloat);C/=i.clientWidth,D/=i.clientHeight;var c=Ye(i),j=i.clientWidth/t.width/c,r=i.clientHeight/t.height/c,R=e.left+e.width*C,n=e.top+e.height*D,o=t.left+t.width*C,p=t.top+t.height*D,S=(R-o)*j,y=(n-p)*r,F=e.width/t.width,Y=e.height/t.height;return{delay:_,duration:typeof P=="function"?P(Math.sqrt(S*S+y*y)):P,easing:x,css:(I,V)=>{var W=V*S,G=V*y,H=I+V*F,Z=I+V*Y;return`transform: ${O} translate(${W}px, ${G}px) scale(${H}, ${Z});`}}}function Ye(i){if("currentCSSZoom"in i)return i.currentCSSZoom;for(var e=i,t=1;e!==null;)t*=+getComputedStyle(e).zoom,e=e.parentElement;return t}var He=Se('<svg><path fill="currentColor" d="M7 19v-2h2v2zm4 0v-2h2v2zm4 0v-2h2v2zm-8-4v-2h2v2zm4 0v-2h2v2zm4 0v-2h2v2zm-8-4V9h2v2zm4 0V9h2v2zm4 0V9h2v2zM7 7V5h2v2zm4 0V5h2v2zm4 0V5h2v2z"></path></svg>');function Re(i,e){const t=ye(e,["$$slots","$$events","$$legacy"]);var m=He();Me(m,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t})),b(i,m)}var We=q('<div class="drag-container svelte-h1aroz"><!></div>');function Ze(i,e){ue(e,!0);let t=L(0),m=L(!1);Be(()=>{window.addEventListener("mousemove",l),window.addEventListener("mouseup",C)}),Le(()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",C)});function _(r){r.preventDefault(),h(t,r.touches[0].clientY,!0),e.onmove(a(t))}function P(r){r.preventDefault(),e.onstart()}function x(r){r.preventDefault(),e.onend(a(t))}function l(r){a(m)&&(r.preventDefault(),h(t,r.clientY,!0),e.onmove(a(t)))}function O(r){r.preventDefault(),h(m,!0),e.onstart()}function C(r){r.preventDefault(),h(m,!1),e.onend(a(t))}function D(r){r.preventDefault(),r.stopPropagation()}var c=We();c.__touchstart=P,c.__touchmove=_,c.__touchend=x,c.__mousemove=l,c.__mousedown=O;var j=u(c);Re(j,{}),v(c),we("selectstart",c,D),b(i,c),ce()}de(["touchstart","touchmove","touchend","mousemove","mousedown"]);var Ne=q('<div class="drag-target svelte-62525b"></div>'),Ue=q('<div class="item-container"><!> <div><!> <div class="song-info svelte-62525b"><span class="song-name svelte-62525b"> </span> <span class="song-duration svelte-62525b"> </span></div> <!></div></div>'),Ge=q('<div class="drag-target svelte-62525b"></div>'),Je=q("<option> </option>"),Ke=q('<div class="form-group"><label for="new-song">Add Song:</label> <div class="add-song-container input-with-button svelte-62525b"><select id="new-song" class="svelte-62525b"></select> <!></div></div>'),Qe=q("<p>No songs left to add</p>"),Xe=q('<div class="form-group"><label for="venue">Venue:</label> <input type="text" id="venue" placeholder="Enter venue name" required/></div> <div class="form-group"><label for="date">Date:</label> <input type="date" id="date" required/></div> <div class="songs-container svelte-62525b"><h2 class="svelte-62525b">Songs</h2> <dl class="svelte-62525b"><dt class="svelte-62525b">Total time:</dt> <dd class="svelte-62525b"> </dd></dl> <div class="items svelte-62525b"><!> <!></div></div> <!> <div class="submit-section"><!></div>',1);function lt(i,e){var R;ue(e,!0);let t=se({...e.setlist}),m=Q(()=>Object.values(e.songs).filter(n=>!t.songs.includes(n.id)).toSorted((n,o)=>n.name.localeCompare(o.name))),_=L(se(((R=Object.values(e.songs).filter(n=>!t.songs.includes(n.id)).toSorted((n,o)=>n.name.localeCompare(o.name))[0])==null?void 0:R.id)||null)),P=Q(()=>t.songs.reduce((n,o)=>{var p;return n+(((p=e.songs[o])==null?void 0:p.length)??0)||0},0)),x=L(void 0),l=L(void 0),O=L(void 0);function C(){var o;if(!a(_)||!e.songs[a(_)])return;const n=e.songs[a(_)];n&&(t.songs.push(n.id),h(_,((o=a(m)[0])==null?void 0:o.id)||null,!0))}function D(n){const o=n.getBoundingClientRect();return o.top+o.height/2}function c(n){if(!a(O))return;const o=Array.from(a(O).querySelectorAll(".list-item")),p=o.reduce((S,y)=>Math.abs(D(y)-n)<Math.abs(D(S)-n)?y:S);n<D(p)?h(l,o.indexOf(p),!0):h(l,o.indexOf(p)+1)}function j(n){h(x,n,!0)}function r(){if(a(x)!==void 0&&a(l)!==void 0){const n=t.songs.splice(a(x),1)[0],o=a(l)>a(x)?a(l)-1:a(l);t.songs.splice(o,0,n)}h(x,void 0),h(l,void 0)}ke(i,{onsubmit:()=>e.onSubmit(t),children:(n,o)=>{var p=Xe(),S=De(p),y=d(u(S),2);oe(y),v(S);var F=d(S,2),Y=d(u(F),2);oe(Y),Y.__change=({currentTarget:{value:s}})=>t.date=s?new Date(s).toISOString():new Date().toISOString(),v(F);var I=d(F,2),V=d(u(I),2),W=d(u(V),2),G=u(W,!0);v(W),v(V);var H=d(V,2),Z=u(H);ie(Z,25,()=>t.songs,Ee,(s,f,z)=>{var w=Ue(),N=u(w);{var M=g=>{var B=Ne();ve(1,B,()=>qe,()=>({duration:200})),b(g,B)};X(N,g=>{a(l)===z&&g(M)})}var T=d(N,2);let E;var k=u(T);Ze(k,{onmove:g=>c(g),onstart:()=>j(z),onend:()=>r()});var A=d(k,2),J=u(A),pe=u(J,!0);v(J);var ae=d(J,2),be=u(ae,!0);v(ae),v(A);var xe=d(A,2);$(xe,{color:"delete",onclick:()=>t.songs.splice(z,1),variant:"icon",children:(g,B)=>{Ae(g,{})},$$slots:{default:!0}}),v(T),v(w),K(g=>{var B;E=Te(T,1,"list-item svelte-62525b",null,E,{dragging:a(x)===z}),U(pe,(B=e.songs[a(f)])==null?void 0:B.name),U(be,g)},[()=>{var g;return le(((g=e.songs[a(f)])==null?void 0:g.length)||0)}]),Ie(w,()=>Fe,()=>({duration:300})),ve(3,w,()=>Ve,()=>({duration:300})),b(s,w)});var fe=d(Z,2);{var me=s=>{var f=Ge();b(s,f)};X(fe,s=>{a(l)===t.songs.length&&s(me)})}v(H),ze(H,s=>h(O,s),()=>a(O)),v(I);var ee=d(I,2);{var ge=s=>{var f=Ke(),z=d(u(f),2),w=u(z);ie(w,21,()=>a(m),M=>M.id,(M,T)=>{var E=Je(),k=u(E,!0);v(E);var A={};K(()=>{U(k,a(T).name),A!==(A=a(T).id)&&(E.value=(E.__value=a(T).id)??"")}),b(M,E)}),v(w);var N=d(w,2);{let M=Q(()=>a(_)===null);$(N,{elementType:"button",onclick:C,get disabled(){return a(M)},children:(T,E)=>{re();var k=ne("Add");b(T,k)},$$slots:{default:!0}})}v(z),v(f),Ce(w,()=>a(_),M=>h(_,M)),b(s,f)},he=s=>{var f=Qe();b(s,f)};X(ee,s=>{a(m).length>0?s(ge):s(he,!1)})}var te=d(ee,2),_e=u(te);$(_e,{elementType:"submit",children:(s,f)=>{re();var z=ne("Save");b(s,z)},$$slots:{default:!0}}),v(te),K((s,f)=>{Oe(Y,s),U(G,f)},[()=>new Date(t.date).toISOString().split("T")[0],()=>le(a(P))]),Pe(y,()=>t.venue,s=>t.venue=s),b(n,p)},$$slots:{default:!0}}),ce()}de(["change"]);export{lt as S};
