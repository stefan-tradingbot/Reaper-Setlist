import{b as xe,a as b,d as de,f as q,e as Se,s as U,t as ne}from"./Dktx9MQm.js";import{p as ue,m as a,o as L,v as h,c as u,r as v,a as ce,k as se,f as De,s as d,t as K,n as Q,q as re}from"./Dv93RvCJ.js";import{a as ye,r as oe,e as ie,B as X,f as le,c as ze,i as Me,h as Te,b as Ee}from"./PsnSwRbB.js";import{r as Ce,i as $,b as Oe}from"./5mgx-mTD.js";import{a as Ie,t as ve,f as Ve,b as qe}from"./BTd0ZWdt.js";import{a as Pe}from"./l-MW7BRb.js";import{F as ke}from"./BTFTRNRE.js";import{D as Ae}from"./BtOcgIR3.js";import{o as Be,a as Le}from"./cMueOY3v.js";function je(i){const e=i-1;return e*e*e+1}function Fe(i,{from:e,to:t},m={}){var{delay:_=0,duration:P=I=>Math.sqrt(I)*120,easing:w=je}=m,l=getComputedStyle(i),C=l.transform==="none"?"":l.transform,[O,D]=l.transformOrigin.split(" ").map(parseFloat);O/=i.clientWidth,D/=i.clientHeight;var c=Ye(i),j=i.clientWidth/t.width/c,r=i.clientHeight/t.height/c,R=e.left+e.width*O,n=e.top+e.height*D,o=t.left+t.width*O,p=t.top+t.height*D,x=(R-o)*j,y=(n-p)*r,F=e.width/t.width,Y=e.height/t.height;return{delay:_,duration:typeof P=="function"?P(Math.sqrt(x*x+y*y)):P,easing:w,css:(I,V)=>{var W=V*x,G=V*y,H=I+V*F,Z=I+V*Y;return`transform: ${C} translate(${W}px, ${G}px) scale(${H}, ${Z});`}}}function Ye(i){if("currentCSSZoom"in i)return i.currentCSSZoom;for(var e=i,t=1;e!==null;)t*=+getComputedStyle(e).zoom,e=e.parentElement;return t}var He=xe('<svg><path fill="currentColor" d="M7 19v-2h2v2zm4 0v-2h2v2zm4 0v-2h2v2zm-8-4v-2h2v2zm4 0v-2h2v2zm4 0v-2h2v2zm-8-4V9h2v2zm4 0V9h2v2zm4 0V9h2v2zM7 7V5h2v2zm4 0V5h2v2zm4 0V5h2v2z"></path></svg>');function Re(i,e){const t=Ce(e,["$$slots","$$events","$$legacy"]);var m=He();ye(m,()=>({class:"icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...t})),b(i,m)}var We=q('<div class="drag-container svelte-h1aroz"><!></div>');function Ze(i,e){ue(e,!0);let t=L(0),m=L(!1);Be(()=>{window.addEventListener("mousemove",l),window.addEventListener("mouseup",O)}),Le(()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",O)});function _(r){r.preventDefault(),h(t,r.touches[0].clientY,!0),e.onmove(a(t))}function P(r){r.preventDefault(),e.onstart()}function w(r){r.preventDefault(),e.onend(a(t))}function l(r){a(m)&&(r.preventDefault(),h(t,r.clientY,!0),e.onmove(a(t)))}function C(r){r.preventDefault(),h(m,!0),e.onstart()}function O(r){r.preventDefault(),h(m,!1),e.onend(a(t))}function D(r){r.preventDefault(),r.stopPropagation()}var c=We();c.__touchstart=P,c.__touchmove=_,c.__touchend=w,c.__mousemove=l,c.__mousedown=C;var j=u(c);Re(j,{}),v(c),Se("selectstart",c,D),b(i,c),ce()}de(["touchstart","touchmove","touchend","mousemove","mousedown"]);var Ne=q('<div class="drag-target svelte-62525b"></div>'),Ue=q('<div class="item-container"><!> <div><!> <div class="song-info svelte-62525b"><span class="song-name svelte-62525b"> </span> <span class="song-duration svelte-62525b"> </span></div> <!></div></div>'),Ge=q('<div class="drag-target svelte-62525b"></div>'),Je=q("<option> </option>"),Ke=q('<div class="form-group"><label for="new-song">Add Song:</label> <div class="add-song-container input-with-button svelte-62525b"><select id="new-song" class="svelte-62525b"></select> <!></div></div>'),Qe=q("<p>No songs left to add</p>"),Xe=q('<div class="form-group"><label for="venue">Venue:</label> <input type="text" id="venue" placeholder="Enter venue name" required/></div> <div class="form-group"><label for="date">Date:</label> <input type="date" id="date" required/></div> <div class="songs-container svelte-62525b"><h2 class="svelte-62525b">Songs</h2> <dl class="svelte-62525b"><dt class="svelte-62525b">Total time:</dt> <dd class="svelte-62525b"> </dd></dl> <div class="items svelte-62525b"><!> <!></div></div> <!> <div class="submit-section"><!></div>',1);function lt(i,e){var R;ue(e,!0);let t=se({...e.setlist}),m=Q(()=>Object.values(e.songs).filter(n=>!t.songs.includes(n.id)).toSorted((n,o)=>n.name.localeCompare(o.name))),_=L(se(((R=Object.values(e.songs).filter(n=>!t.songs.includes(n.id)).toSorted((n,o)=>n.name.localeCompare(o.name))[0])==null?void 0:R.id)||null)),P=Q(()=>t.songs.reduce((n,o)=>{var p;return n+(((p=e.songs[o])==null?void 0:p.length)??0)||0},0)),w=L(void 0),l=L(void 0),C=L(void 0);function O(){var o;if(!a(_)||!e.songs[a(_)])return;const n=e.songs[a(_)];n&&(t.songs.push(n.id),h(_,((o=a(m)[0])==null?void 0:o.id)||null,!0))}function D(n){const o=n.getBoundingClientRect();return o.top+o.height/2}function c(n){if(!a(C))return;const o=Array.from(a(C).querySelectorAll(".list-item")),p=o.reduce((x,y)=>Math.abs(D(y)-n)<Math.abs(D(x)-n)?y:x);n<D(p)?h(l,o.indexOf(p),!0):h(l,o.indexOf(p)+1)}function j(n){h(w,n,!0)}function r(){if(a(w)!==void 0&&a(l)!==void 0){const n=t.songs.splice(a(w),1)[0],o=a(l)>a(w)?a(l)-1:a(l);t.songs.splice(o,0,n)}h(w,void 0),h(l,void 0)}ke(i,{onsubmit:()=>e.onSubmit(t),children:(n,o)=>{var p=Xe(),x=De(p),y=d(u(x),2);oe(y),v(x);var F=d(x,2),Y=d(u(F),2);oe(Y),Y.__change=({currentTarget:{value:s}})=>t.date=s?new Date(s).toISOString():new Date().toISOString(),v(F);var I=d(F,2),V=d(u(I),2),W=d(u(V),2),G=u(W,!0);v(W),v(V);var H=d(V,2),Z=u(H);ie(Z,25,()=>t.songs,Me,(s,f,z)=>{var S=Ue(),N=u(S);{var M=g=>{var B=Ne();ve(1,B,()=>qe,()=>({duration:200})),b(g,B)};$(N,g=>{a(l)===z&&g(M)})}var T=d(N,2);let E;var k=u(T);Ze(k,{onmove:g=>c(g),onstart:()=>j(z),onend:()=>r()});var A=d(k,2),J=u(A),pe=u(J,!0);v(J);var ae=d(J,2),be=u(ae,!0);v(ae),v(A);var we=d(A,2);X(we,{color:"delete",onclick:()=>t.songs.splice(z,1),variant:"icon",children:(g,B)=>{Ae(g,{})},$$slots:{default:!0}}),v(T),v(S),K(g=>{var B;E=ze(T,1,"list-item svelte-62525b",null,E,{dragging:a(w)===z}),U(pe,(B=e.songs[a(f)])==null?void 0:B.name),U(be,g)},[()=>{var g;return le(((g=e.songs[a(f)])==null?void 0:g.length)||0)}]),Ie(S,()=>Fe,()=>({duration:300})),ve(3,S,()=>Ve,()=>({duration:300})),b(s,S)});var fe=d(Z,2);{var me=s=>{var f=Ge();b(s,f)};$(fe,s=>{a(l)===t.songs.length&&s(me)})}v(H),Oe(H,s=>h(C,s),()=>a(C)),v(I);var ee=d(I,2);{var ge=s=>{var f=Ke(),z=d(u(f),2),S=u(z);ie(S,21,()=>a(m),M=>M.id,(M,T)=>{var E=Je(),k=u(E,!0);v(E);var A={};K(()=>{U(k,a(T).name),A!==(A=a(T).id)&&(E.value=(E.__value=a(T).id)??"")}),b(M,E)}),v(S);var N=d(S,2);{let M=Q(()=>a(_)===null);X(N,{elementType:"button",onclick:O,get disabled(){return a(M)},children:(T,E)=>{re();var k=ne("Add");b(T,k)},$$slots:{default:!0}})}v(z),v(f),Ee(S,()=>a(_),M=>h(_,M)),b(s,f)},he=s=>{var f=Qe();b(s,f)};$(ee,s=>{a(m).length>0?s(ge):s(he,!1)})}var te=d(ee,2),_e=u(te);X(_e,{elementType:"submit",children:(s,f)=>{re();var z=ne("Save");b(s,z)},$$slots:{default:!0}}),v(te),K((s,f)=>{Te(Y,s),U(G,f)},[()=>new Date(t.date).toISOString().split("T")[0],()=>le(a(P))]),Pe(y,()=>t.venue,s=>t.venue=s),b(n,p)},$$slots:{default:!0}}),ce()}de(["change"]);export{lt as S};
