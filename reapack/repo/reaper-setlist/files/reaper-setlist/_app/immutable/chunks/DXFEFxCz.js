import{d as V,f as O,t as F,a as f,s as B}from"./B_oGNvez.js";import{g as X,e as Y,B as G,b as Z,n as ee,r as P}from"./DEfdFb_i.js";import{p as te,k as ae,a as se,f as ne,s,c as n,m as d,n as h,t as M,o as re,r,q as T,v as oe}from"./BWSO7Bi6.js";import{b as ie,a as N}from"./pJQC24l2.js";import{F as le}from"./BMeno8qO.js";var ce=O("<option> </option>"),de=O('<div class="form-group"><label for="relative-path">Project File:</label> <select id="relative-path" required><option>Select project...</option><!></select> <div class="checkbox-container svelte-blzl5x"><label class="checkbox-label svelte-blzl5x"><input type="checkbox" class="svelte-blzl5x"/> Hide projects already used by other songs</label></div></div> <div class="form-group"><label for="song-name">Song Name:</label> <input type="text" id="song-name" placeholder="Enter song name" required/></div> <div class="form-group"><label for="duration">Duration (seconds):</label> <div class="input-with-button"><input type="number" id="duration" placeholder="Duration in seconds" min="0" required/> <!></div> <span class="duration-display svelte-blzl5x"> </span></div> <div class="submit-section"><!></div>',1);function he(R,u){te(u,!0);const p=X(),e=ae({...u.song}),W=h(()=>H(e.length));let _=re(!0);const A=h(()=>Object.values(u.songs).filter(a=>a.id!==e.id).map(a=>a.path)),C=h(()=>d(_)?u.projects.filter(a=>!d(A).includes(a)):u.projects);function H(a){const o=Math.floor(a/60),i=a%60;return`${o}:${i.toString().padStart(2,"0")}`}function I(a){e.path=a;const o=a.split(/[/\\]/),v=o[o.length-1].replace(/\.[^/.]+$/,"");e.name=v}async function L(){const a=await p.script.getOpenTabs(),o=a.tabs[a.activeIndex];let i=!1;(!o||!e.path.endsWith(o.name))&&(await p.reaper.newTab(),await p.script.openProject(e.path),i=!0),e.length=Math.ceil(await p.script.getProjectLength()),i&&await p.reaper.closeTab(),ee.success("Duration retrieved from Reaper!")}le(R,{onsubmit:()=>u.onSubmit(e),children:(a,o)=>{var i=de(),v=ne(i),m=s(n(v),2);m.__change=t=>I(t.currentTarget.value);var g=n(m);g.value=g.__value="";var U=s(g);Y(U,16,()=>d(C),t=>t,(t,l)=>{var c=ce(),b=n(c,!0);r(c);var E={};M(()=>{B(b,l),E!==(E=l)&&(c.value=(c.__value=l)??"")}),f(t,c)}),r(m);var w=s(m,2),k=n(w),$=n(k);P($),T(),r(k),r(w),r(v);var x=s(v,2),D=s(n(x),2);P(D),r(x);var y=s(x,2),S=s(n(y),2),j=n(S);P(j);var J=s(j,2);{let t=h(()=>e.path==="");G(J,{elementType:"button",onclick:L,get disabled(){return d(t)},children:(l,c)=>{T();var b=F("Get from Reaper");f(l,b)},$$slots:{default:!0}})}r(S);var q=s(S,2),K=n(q,!0);r(q),r(y);var z=s(y,2),Q=n(z);{let t=h(()=>e.name===""||e.path==="");G(Q,{elementType:"submit",get disabled(){return d(t)},children:(l,c)=>{T();var b=F("Save");f(l,b)},$$slots:{default:!0}})}r(z),M(()=>B(K,d(W))),Z(m,()=>e.path,t=>e.path=t),ie($,()=>d(_),t=>oe(_,t)),N(D,()=>e.name,t=>e.name=t),N(j,()=>e.length,t=>e.length=t),f(a,i)},$$slots:{default:!0}}),se()}V(["change"]);export{he as S};
