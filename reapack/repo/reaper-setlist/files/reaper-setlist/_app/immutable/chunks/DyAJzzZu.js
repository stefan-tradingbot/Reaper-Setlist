import{b as Se,a as w,d as ue,f as C,e as ye,s as Z,t as se}from"./BzJ4SX3Z.js";import{p as ce,l as a,q as V,o as h,c as d,r as l,a as fe,k as re,f as De,s as v,t as K,m as Q,n as oe}from"./CK57Ve49.js";import{r as ke,i as X,b as ze}from"./_0x7LJxc.js";import{a as Me,r as ie,e as le,B as $,f as ve,c as Te,i as Ee,h as Ce,b as Oe}from"./cs0qqntR.js";import{a as qe,t as de,f as Ie,b as Ve}from"./B0NjBQQi.js";import{a as Pe}from"./DgwUmPXI.js";import{F as Ae}from"./CuEdYIVd.js";import{D as Be}from"./iJVqAmD-.js";import{o as Le,a as je}from"./BD92J0bs.js";function Fe(n){const e=n-1;return e*e*e+1}function He(n,{from:e,to:t},m={}){var{delay:u=0,duration:z=T=>Math.sqrt(T)*120,easing:x=Fe}=m,r=getComputedStyle(n),M=r.transform==="none"?"":r.transform,[c,O]=r.transformOrigin.split(" ").map(parseFloat);c/=n.clientWidth,O/=n.clientHeight;var F=Re(n),N=n.clientWidth/t.width/F,U=n.clientHeight/t.height/F,H=e.left+e.width*c,s=e.top+e.height*O,o=t.left+t.width*c,_=t.top+t.height*O,b=(H-o)*N,D=(s-_)*U,P=e.width/t.width,A=e.height/t.height;return{delay:u,duration:typeof z=="function"?z(Math.sqrt(b*b+D*D)):z,easing:x,css:(T,E)=>{var R=E*b,G=E*D,B=T+E*P,W=T+E*A;return`transform: ${M} translate(${R}px, ${G}px) scale(${B}, ${W});`}}}function Re(n){if("currentCSSZoom"in n)return n.currentCSSZoom;for(var e=n,t=1;e!==null;)t*=+getComputedStyle(e).zoom,e=e.parentElement;return t}var We=Se('<svg><path fill="currentColor" d="M7 19v-2h2v2zm4 0v-2h2v2zm4 0v-2h2v2zm-8-4v-2h2v2zm4 0v-2h2v2zm4 0v-2h2v2zm-8-4V9h2v2zm4 0V9h2v2zm4 0V9h2v2zM7 7V5h2v2zm4 0V5h2v2zm4 0V5h2v2z"></path></svg>');function Ye(n,e){const t=ke(e,["$$slots","$$events","$$legacy"]);var m=We();Me(m,()=>({class:"icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...t})),w(n,m)}function Ze(n,e,t){n.preventDefault(),h(e,n.touches[0].clientY,!0),t.onmove(a(e))}function Ne(n,e){n.preventDefault(),e.onstart()}function Ue(n,e,t){n.preventDefault(),e.onend(a(t))}function Ge(n,e,t){n.preventDefault(),h(e,!0),t.onstart()}var Je=C('<div class="drag-container svelte-1iq6vyq"><!></div>');function Ke(n,e){ce(e,!0);let t=V(0),m=V(!1);Le(()=>{window.addEventListener("mousemove",u),window.addEventListener("mouseup",z)}),je(()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",z)});function u(c){a(m)&&(c.preventDefault(),h(t,c.clientY,!0),e.onmove(a(t)))}function z(c){c.preventDefault(),h(m,!1),e.onend(a(t))}function x(c){c.preventDefault(),c.stopPropagation()}var r=Je();r.__touchstart=[Ne,e],r.__touchmove=[Ze,t,e],r.__touchend=[Ue,e,t],r.__mousemove=u,r.__mousedown=[Ge,m,e];var M=d(r);Ye(M,{}),l(r),ye("selectstart",r,x),w(n,r),fe()}ue(["touchstart","touchmove","touchend","mousemove","mousedown"]);var Qe=({currentTarget:{value:n}},e)=>e.date=n?new Date(n).toISOString():new Date().toISOString(),Xe=C('<div class="drag-target svelte-1x8w3k5"></div>'),$e=C('<div class="item-container"><!> <div><!> <div class="song-info svelte-1x8w3k5"><span class="song-name svelte-1x8w3k5"> </span> <span class="song-duration svelte-1x8w3k5"> </span></div> <!></div></div>'),et=C('<div class="drag-target svelte-1x8w3k5"></div>'),tt=C("<option> </option>"),at=C('<div class="form-group"><label for="new-song">Add Song:</label> <div class="add-song-container input-with-button svelte-1x8w3k5"><select id="new-song" class="svelte-1x8w3k5"></select> <!></div></div>'),nt=C("<p>No songs left to add</p>"),st=C('<div class="form-group"><label for="venue">Venue:</label> <input type="text" id="venue" placeholder="Enter venue name" required/></div> <div class="form-group"><label for="date">Date:</label> <input type="date" id="date" required/></div> <div class="songs-container svelte-1x8w3k5"><h2 class="svelte-1x8w3k5">Songs</h2> <dl class="svelte-1x8w3k5"><dt class="svelte-1x8w3k5">Total time:</dt> <dd class="svelte-1x8w3k5"> </dd></dl> <div class="items svelte-1x8w3k5"><!> <!></div></div> <!> <div class="submit-section"><!></div>',1);function mt(n,e){var H;ce(e,!0);let t=re({...e.setlist}),m=Q(()=>Object.values(e.songs).filter(s=>!t.songs.includes(s.id)).toSorted((s,o)=>s.name.localeCompare(o.name))),u=V(re(((H=Object.values(e.songs).filter(s=>!t.songs.includes(s.id)).toSorted((s,o)=>s.name.localeCompare(o.name))[0])==null?void 0:H.id)||null)),z=Q(()=>t.songs.reduce((s,o)=>{var _;return s+(((_=e.songs[o])==null?void 0:_.length)??0)||0},0)),x=V(void 0),r=V(void 0),M=V(void 0);function c(){var o;if(!a(u)||!e.songs[a(u)])return;const s=e.songs[a(u)];s&&(t.songs.push(s.id),h(u,((o=a(m)[0])==null?void 0:o.id)||null,!0))}function O(s){const o=s.getBoundingClientRect();return o.top+o.height/2}function F(s){if(!a(M))return;const o=Array.from(a(M).querySelectorAll(".list-item")),_=o.reduce((b,D)=>Math.abs(O(D)-s)<Math.abs(O(b)-s)?D:b);s<O(_)?h(r,o.indexOf(_),!0):h(r,o.indexOf(_)+1)}function N(s){h(x,s,!0)}function U(){if(a(x)!==void 0&&a(r)!==void 0){const s=t.songs.splice(a(x),1)[0],o=a(r)>a(x)?a(r)-1:a(r);t.songs.splice(o,0,s)}h(x,void 0),h(r,void 0)}Ae(n,{onsubmit:()=>e.onSubmit(t),children:(s,o)=>{var _=st(),b=De(_),D=v(d(b),2);ie(D),l(b);var P=v(b,2),A=v(d(P),2);ie(A),A.__change=[Qe,t],l(P);var T=v(P,2),E=v(d(T),2),R=v(d(E),2),G=d(R,!0);l(R),l(E);var B=v(E,2),W=d(B);le(W,25,()=>t.songs,Ee,(i,f,k)=>{var S=$e(),Y=d(S);{var J=g=>{var j=Xe();de(1,j,()=>Ve,()=>({duration:200})),w(g,j)};X(Y,g=>{a(r)===k&&g(J)})}var p=v(Y,2);let q;var y=d(p);Ke(y,{onmove:g=>F(g),onstart:()=>N(k),onend:()=>U()});var I=v(y,2),L=d(I),we=d(L,!0);l(L);var ae=v(L,2),xe=d(ae,!0);l(ae),l(I);var be=v(I,2);$(be,{color:"delete",onclick:()=>t.songs.splice(k,1),variant:"icon",children:(g,j)=>{Be(g,{})},$$slots:{default:!0}}),l(p),l(S),K((g,j)=>{var ne;q=Te(p,1,"list-item svelte-1x8w3k5",null,q,g),Z(we,(ne=e.songs[a(f)])==null?void 0:ne.name),Z(xe,j)},[()=>({dragging:a(x)===k}),()=>{var g;return ve(((g=e.songs[a(f)])==null?void 0:g.length)||0)}]),qe(S,()=>He,()=>({duration:300})),de(3,S,()=>Ie,()=>({duration:300})),w(i,S)});var me=v(W,2);{var ge=i=>{var f=et();w(i,f)};X(me,i=>{a(r)===t.songs.length&&i(ge)})}l(B),ze(B,i=>h(M,i),()=>a(M)),l(T);var ee=v(T,2);{var he=i=>{var f=at(),k=v(d(f),2),S=d(k);le(S,21,()=>a(m),p=>p.id,(p,q)=>{var y=tt(),I={},L=d(y,!0);l(y),K(()=>{I!==(I=a(q).id)&&(y.value=(y.__value=a(q).id)??""),Z(L,a(q).name)}),w(p,y)}),l(S);var Y=v(S,2);const J=Q(()=>a(u)===null);$(Y,{elementType:"button",onclick:c,get disabled(){return a(J)},children:(p,q)=>{oe();var y=se("Add");w(p,y)},$$slots:{default:!0}}),l(k),l(f),Oe(S,()=>a(u),p=>h(u,p)),w(i,f)},_e=i=>{var f=nt();w(i,f)};X(ee,i=>{a(m).length>0?i(he):i(_e,!1)})}var te=v(ee,2),pe=d(te);$(pe,{elementType:"submit",children:(i,f)=>{oe();var k=se("Save");w(i,k)},$$slots:{default:!0}}),l(te),K((i,f)=>{Ce(A,i),Z(G,f)},[()=>new Date(t.date).toISOString().split("T")[0],()=>ve(a(z))]),Pe(D,()=>t.venue,i=>t.venue=i),w(s,_)},$$slots:{default:!0}}),fe()}ue(["change"]);export{mt as S};
