import{k as C,c as wt,e as bt,l as It,a as X,g as Yt,m as Zt,B as R,r as _t,o as te,n as P,p as ee,i as ae}from"../chunks/PsnSwRbB.js";import{f as p,s as Q,a as r,t as ct,b as Y,d as re,c as At}from"../chunks/Dktx9MQm.js";import{c as d,r as i,s as h,t as q,m as t,p as se,o as y,k as lt,w as xt,v as a,a as oe,n as Et,f as V,q as O}from"../chunks/Dv93RvCJ.js";import{p as Ft,i as N,r as Z}from"../chunks/5mgx-mTD.js";import{a as Rt}from"../chunks/l-MW7BRb.js";import{F as le}from"../chunks/BTFTRNRE.js";import{S as ie}from"../chunks/CHhcvD1X.js";const ne=async({fetch:g})=>{try{return await C.ensureInitialized(g),{folderPath:C.folderPath||"",scriptActionId:C.scriptActionId||""}}catch(l){return{folderPath:"",scriptActionId:"",error:l instanceof Error?l.message:"An unknown error occurred."}}},Ze=Object.freeze(Object.defineProperty({__proto__:null,load:ne},Symbol.toStringTag,{value:"Module"}));var ce=p('<a class="svelte-1h10f03"> </a>'),ve=p('<li class="svelte-1h10f03"><!></li>'),de=p('<ol class="svelte-1h10f03"></ol>'),pe=p('<a class="svelte-1h10f03"> </a>'),ue=p('<li class="svelte-1h10f03"><!></li>'),fe=p('<ul class="svelte-1h10f03"></ul>'),he=p('<div><h2 class="svelte-1h10f03"> </h2> <!></div>');function Vt(g,l){let n=Ft(l,"variant",3,"default"),s=Ft(l,"listType",3,"unordered");const $={default:"instruction-box--default",success:"instruction-box--success",info:"instruction-box--info",help:"instruction-box--help"};var D=he(),tt=d(D),k=d(tt,!0);i(tt);var B=h(tt,2);{var rt=U=>{var H=de();bt(H,21,()=>l.steps,T=>T.label,(T,S)=>{var j=ve(),z=d(j);{var G=u=>{var o=ce(),st=d(o,!0);i(o),q(()=>{It(o,"href",`#${t(S).href}`),Q(st,t(S).label)}),r(u,o)},L=u=>{var o=ct();q(()=>Q(o,t(S).label)),r(u,o)};N(z,u=>{t(S).href?u(G):u(L,!1)})}i(j),r(T,j)}),i(H),r(U,H)},vt=U=>{var H=fe();bt(H,21,()=>l.steps,T=>T.label,(T,S)=>{var j=ue(),z=d(j);{var G=u=>{var o=pe(),st=d(o,!0);i(o),q(()=>{It(o,"href",`#${t(S).href}`),Q(st,t(S).label)}),r(u,o)},L=u=>{var o=ct();q(()=>Q(o,t(S).label)),r(u,o)};N(z,u=>{t(S).href?u(G):u(L,!1)})}i(j),r(T,j)}),i(H),r(U,H)};N(B,U=>{s()==="ordered"?U(rt):U(vt,!1)})}i(D),q(()=>{wt(D,1,`instruction-box ${$[n()]??""}`,"svelte-1h10f03"),Q(k,l.title)}),r(g,D)}var ge=Y('<svg><path fill="currentColor" d="m23 12l-4-4v3h-9v2h9v3M1 18V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3h-2V6H3v12h12v-3h2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2"></path></svg>');function me(g,l){const n=Z(l,["$$slots","$$events","$$legacy"]);var s=ge();X(s,()=>({class:"icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n})),r(g,s)}var _e=Y('<svg><path fill="currentColor" d="m14 12l-4-4v3H2v2h8v3m10 2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3h2V6h12v12H6v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"></path></svg>');function xe(g,l){const n=Z(l,["$$slots","$$events","$$legacy"]);var s=_e();X(s,()=>({class:"icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n})),r(g,s)}var we=Y('<svg><path fill="currentColor" d="M17.65 6.35A7.96 7.96 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"></path></svg>');function be(g,l){const n=Z(l,["$$slots","$$events","$$legacy"]);var s=we();X(s,()=>({class:"icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n})),r(g,s)}var $e=Y('<svg><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 2a8 8 0 0 1 8 8a8 8 0 0 1-8 8a8 8 0 0 1-8-8a8 8 0 0 1 8-8m0 5a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3"></path></svg>');function Dt(g,l){const n=Z(l,["$$slots","$$events","$$legacy"]);var s=$e();X(s,()=>({class:"icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n})),r(g,s)}var ke=Y('<svg><path fill="currentColor" d="M19 20H4a2 2 0 0 1-2-2V6c0-1.11.89-2 2-2h6l2 2h7a2 2 0 0 1 2 2H4v10l2.14-8h17.07l-2.28 8.5c-.23.87-1.01 1.5-1.93 1.5"></path></svg>');function ye(g,l){const n=Z(l,["$$slots","$$events","$$legacy"]);var s=ke();X(s,()=>({class:"icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n})),r(g,s)}var Se=Y('<svg><path fill="currentColor" d="M22 16a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2h12a2 2 0 0 1 2 2zm-6 4v2H4a2 2 0 0 1-2-2V7h2v13zm-3-6l7-7l-1.41-1.41L13 11.17L9.91 8.09L8.5 9.5z"></path></svg>');function Pe(g,l){const n=Z(l,["$$slots","$$events","$$legacy"]);var s=Se();X(s,()=>({class:"icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n})),r(g,s)}var Ce=Y('<svg><path fill="currentColor" d="M20 16V4H8v12zm2 0a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2h12a2 2 0 0 1 2 2zm-6 4v2H4a2 2 0 0 1-2-2V7h2v13z"></path></svg>');function Te(g,l){const n=Z(l,["$$slots","$$events","$$legacy"]);var s=Ce();X(s,()=>({class:"icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...n})),r(g,s)}var Ie=p("<!> Refresh Status",1),Ae=p("<div> </div>"),Ee=p('<div class="validation-message validation-message--pending svelte-g40i6i">Click "Save" to validate this folder path</div>'),Fe=p('<div class="form-group"><label for="backing-tracks-folder">Backing Tracks Root Folder:</label> <input type="text" id="backing-tracks-folder" name="backing-tracks-folder" placeholder="e.g., /path/to/your/backing/tracks"/> <!></div> <div class="submit-section"><!></div>',1),Re=p("<!> Export Data",1),Ve=p("<!> Import Data",1),De=p("<!> Select All",1),Be=p("<!> None",1),He=p('<div class="loading-tracks svelte-g40i6i">Loading tracks from Reaper...</div>'),je=p('<div class="no-tracks svelte-g40i6i">No tracks found in open projects.</div>'),ze=p('<label class="track-checkbox svelte-g40i6i"><input type="checkbox" class="svelte-g40i6i"/> <span class="track-name svelte-g40i6i"> </span></label>'),Le=p('<div class="track-list svelte-g40i6i"></div>'),Me=p("<!> Start Export",1),Oe=p('<div class="export-form svelte-g40i6i"><div class="form-group"><label for="export-path">Export Path:</label> <div class="path-input-group svelte-g40i6i"><input type="text" id="export-path" placeholder="e.g., /path/to/export/folder" class="svelte-g40i6i"/> <!></div></div> <div class="form-group"><div class="track-list-header svelte-g40i6i"><label class="svelte-g40i6i">Select Tracks to Export:</label> <div class="track-actions svelte-g40i6i"><!> <!></div></div> <!></div> <div class="export-actions svelte-g40i6i"><!> <!></div></div>'),Ne=p("<!> Configure Export",1),Ue=p('<div class="import-export-buttons svelte-g40i6i"><!></div>'),Je=p('<div class="content svelte-g40i6i"><h1>Setup</h1> <!> <div class="script-status svelte-g40i6i"><!> <!></div> <!> <div class="import-export svelte-g40i6i"><h3>Data Management</h3> <div class="import-export-buttons svelte-g40i6i"><!> <!></div></div> <div class="import-export svelte-g40i6i"><h3>Recording Export</h3> <!></div></div>');function ta(g,l){se(l,!0);const n=Yt();let s=y(lt(l.data.folderPath)),$=y(lt(l.data.scriptActionId&&l.data.scriptActionId.trim()!==""?"completed":"pending")),D=y(!1),tt=y(!1),k=y("pending"),B=y(""),rt=y(lt(l.data.folderPath));const vt=[{label:"Add your songs",href:"/song"},{label:"Create setlists",href:"/"}],U=[{label:'Open Reaper and go to "Actions" > "Show Action List".'},{label:"If you installed this via ReaPack, the reaper-setlist.lua script should already be listed here."},{label:'If not, click "New Action" > "Load ReaScript..." and open the reaper-setlist.lua script.'},{label:"Simply run the script to register it."},{label:"Use the refresh button below to check installation status."},{label:"Enter the root folder path where your backing tracks are stored in the form below."},{label:'Click "Save" to store these settings.'}];xt(()=>{!t(tt)&&t($)!=="completed"&&(a(tt,!0),T())}),xt(()=>{t(s)!==t(rt)&&t(k)!=="pending"&&(a(k,"pending"),a(B,""))});async function H(e){var _;e.preventDefault();let c=(((_=new FormData(e.target).get("backing-tracks-folder"))==null?void 0:_.toString())||"").replaceAll("\\","/");for(;c.includes("//");)c=c.replace("//","/");a(k,"checking"),a(B,"Validating folder..."),a(s,c,!0),a(rt,c,!0);try{const m=await n.script.testProjectsFolder(c);if(!m.valid){a(k,"error"),a(B,m.message||"Invalid folder path. Please check the path and try again.",!0);return}await C.updateFolderPath(c),a(k,"success"),a(B,m.message||"Folder path is valid!",!0),P.success("Settings saved successfully!")}catch(m){a(k,"error"),a(B,`Error: ${m.message}`),P.error(`Failed to save settings: ${m.message}`);return}}async function T(){if(!t(D)){a(D,!0),a($,"running");try{const e=await n.scriptSettings.getScriptActionId();if(e&&e.trim()!==""){C.reset(),await C.initialize(fetch);const f=Zt();await n.script.testActionId(f)===`Test action ID received: ${e}`?a($,"completed"):a($,"error"),a($,"completed")}else a($,"error")}catch(e){console.error("Error checking script installation:",e),a($,"error")}finally{a(D,!1)}}}async function S(){const e=await n.songs.list(),f=await n.sets.list(),c=JSON.stringify({songs:e,sets:f},null,2),_=new Blob([c],{type:"application/json"}),m=URL.createObjectURL(_),b=document.createElement("a");b.href=m,b.download="reaper-setlist-data.json",document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(m),P.success("Data exported successfully!")}async function j(){const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async f=>{const v=f.target;if(v.files&&v.files.length>0){const c=v.files[0];try{const _=await c.text(),m=JSON.parse(_),b=new Map;for(const I of Object.values(m.songs)){const{id:M,...J}=I,w=await n.songs.add(J);b.set(M,w.id)}for(const I of Object.values(m.sets)){const{...M}=I,J={...M,songs:I.songs.map(w=>b.get(w)||w)};await n.sets.add(J)}P.success("Data imported successfully!")}catch(_){P.error(`Failed to import data: ${_.message}`)}}},e.click()}let z=y(!1),G=y(!1),L=y(lt([])),u=y(lt(new Set)),o=y("");xt(()=>{!t(o)&&C.exportPath&&a(o,C.exportPath,!0)});async function st(){a(z,!0),a(G,!0);try{a(L,await n.script.getTrackNames(),!0),a(u,new Set(t(L)),!0),t(o)||a(o,C.exportPath||t(s)||"",!0)}catch(e){P.error(`Failed to fetch tracks: ${e.message}`),a(z,!1)}finally{a(G,!1)}}function Bt(e){const f=new Set(t(u));f.has(e)?f.delete(e):f.add(e),a(u,f,!0)}function Ht(){a(u,new Set(t(L)),!0)}function jt(){a(u,new Set,!0)}async function zt(){try{const e=await n.script.browseFolder(t(o)||t(s)||"/");e&&e.trim()!==""&&(a(o,e,!0),await C.updateExportPath(t(o)))}catch(e){P.error(`Failed to open folder browser: ${e.message}`)}}async function Lt(){if(t(u).size===0){P.error("Please select at least one track.");return}if(!t(o)){P.error("Please enter an export path.");return}try{await C.updateExportPath(t(o)),await n.script.exportRecordings(Array.from(t(u)),t(o)),P.success("Recording export started! Check Reaper for progress."),a(z,!1)}catch(e){P.error(`Failed to start export: ${e.message}`)}}var dt=Je(),$t=h(d(dt),2);{var Mt=e=>{Vt(e,{title:"Script Installation",get steps(){return U},variant:"help",listType:"ordered"})},Ot=e=>{Vt(e,{title:"Next steps:",get steps(){return vt},variant:"success",listType:"unordered"})};N($t,e=>{t($)==="error"?e(Mt):e(Ot,!1)})}var pt=h($t,2),kt=d(pt);{let e=Et(()=>t($)==="completed"?"Script is installed and ready to use":t($)==="running"?"Checking installation status...":"Script not detected. Please install the script in Reaper and refresh.");ie(kt,{title:"Script Installation Status",get description(){return t(e)},get status(){return t($)}})}var Nt=h(kt,2);R(Nt,{elementType:"button",onclick:T,get disabled(){return t(D)},variant:"text",children:(e,f)=>{var v=Ie(),c=V(v);be(c,{}),O(),r(e,v)},$$slots:{default:!0}}),i(pt);var yt=h(pt,2);le(yt,{onsubmit:H,children:(e,f)=>{var v=Fe(),c=V(v),_=h(d(c),2);_t(_);var m=h(_,2);{var b=w=>{var A=Ae(),K=d(A,!0);i(A),q(()=>{wt(A,1,`validation-message validation-message--${t(k)??""}`,"svelte-g40i6i"),Q(K,t(B))}),r(w,A)},I=w=>{var A=At(),K=V(A);{var ft=et=>{var it=Ee();r(et,it)};N(K,et=>{t(s)&&t(s).trim()!==""&&t(s)!==t(rt)&&et(ft)},!0)}r(w,A)};N(m,w=>{t(B)?w(b):w(I,!1)})}i(c);var M=h(c,2),J=d(M);R(J,{elementType:"submit",color:"success",children:(w,A)=>{O();var K=ct("Save");r(w,K)},$$slots:{default:!0}}),i(M),q(()=>wt(_,1,te(t(k)==="success"?"success":t(k)==="warning"?"warning":t(k)==="error"?"error":""))),Rt(_,()=>t(s),w=>a(s,w)),r(e,v)},$$slots:{default:!0}});var ut=h(yt,2),St=h(d(ut),2),Pt=d(St);R(Pt,{elementType:"button",onclick:S,variant:"text",children:(e,f)=>{var v=Re(),c=V(v);me(c,{}),O(),r(e,v)},$$slots:{default:!0}});var Ut=h(Pt,2);R(Ut,{elementType:"button",onclick:j,variant:"text",children:(e,f)=>{var v=Ve(),c=V(v);xe(c,{}),O(),r(e,v)},$$slots:{default:!0}}),i(St),i(ut);var Ct=h(ut,2),Jt=h(d(Ct),2);{var Wt=e=>{var f=Oe(),v=d(f),c=h(d(v),2),_=d(c);_t(_);var m=h(_,2);R(m,{variant:"secondary",onclick:zt,title:"Browse Folder",children:(x,E)=>{ye(x,{})},$$slots:{default:!0}}),i(c),i(v);var b=h(v,2),I=d(b),M=h(d(I),2),J=d(M);R(J,{elementType:"button",variant:"text",onclick:Ht,title:"Select All",children:(x,E)=>{var F=De(),W=V(F);Pe(W,{}),O(),r(x,F)},$$slots:{default:!0}});var w=h(J,2);R(w,{elementType:"button",variant:"text",onclick:jt,title:"Deselect All",children:(x,E)=>{var F=Be(),W=V(F);Te(W,{}),O(),r(x,F)},$$slots:{default:!0}}),i(M),i(I);var A=h(I,2);{var K=x=>{var E=He();r(x,E)},ft=x=>{var E=At(),F=V(E);{var W=at=>{var ot=je();r(at,ot)},ht=at=>{var ot=Le();bt(ot,21,()=>t(L),ae,(Kt,gt)=>{var mt=ze(),nt=d(mt);_t(nt),nt.__change=()=>Bt(t(gt));var Tt=h(nt,2),Qt=d(Tt,!0);i(Tt),i(mt),q(Xt=>{ee(nt,Xt),Q(Qt,t(gt))},[()=>t(u).has(t(gt))]),r(Kt,mt)}),i(ot),r(at,ot)};N(F,at=>{t(L).length===0?at(W):at(ht,!1)},!0)}r(x,E)};N(A,x=>{t(G)?x(K):x(ft,!1)})}i(b);var et=h(b,2),it=d(et);{let x=Et(()=>t(u).size===0||!t(o));R(it,{elementType:"button",onclick:Lt,get disabled(){return t(x)},children:(E,F)=>{var W=Me(),ht=V(W);Dt(ht,{}),O(),r(E,W)},$$slots:{default:!0}})}var Gt=h(it,2);R(Gt,{elementType:"button",variant:"text",onclick:()=>a(z,!1),children:(x,E)=>{O();var F=ct("Cancel");r(x,F)},$$slots:{default:!0}}),i(et),i(f),Rt(_,()=>t(o),x=>a(o,x)),r(e,f)},qt=e=>{var f=Ue(),v=d(f);R(v,{elementType:"button",onclick:st,variant:"text",children:(c,_)=>{var m=Ne(),b=V(m);Dt(b,{}),O(),r(c,m)},$$slots:{default:!0}}),i(f),r(e,f)};N(Jt,e=>{t(z)?e(Wt):e(qt,!1)})}i(Ct),i(dt),r(g,dt),oe()}re(["change"]);export{ta as component,Ze as universal};
